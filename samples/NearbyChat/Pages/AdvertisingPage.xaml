<BasePage
    x:Class="NearbyChat.Pages.AdvertisingPage"
    x:Name="this"
    x:TypeArguments="AdvertisingPageViewModel"
    Background="{AppThemeBinding Light={StaticResource LightBackgroundGradient}, Dark={StaticResource DarkBackgroundGradient}}"
    x:DataType="AdvertisingPageViewModel">

    <BasePage.Content>
        <Grid RowDefinitions="Auto,*,*"
              RowSpacing="{StaticResource SpacingXL}"
              Margin="{StaticResource SpacingXL}">
            <FeatureControlCard
                VerticalOptions="Start"
                FeatureIconBadgeStyle="{StaticResource FeatureIconBadgeAdvertiseStyle}"
                Title="Advertising Mode"
                ActiveSubtitle="Broadcasting"
                InactiveSubtitle="Not advertising"
                ActiveButtonText="Stop Advertising"
                InactiveButtonText="Start Advertising"
                ActiveButtonColor="{StaticResource AccentAdvertising}"
                InactiveButtonColor="{AppThemeBinding Light={StaticResource LightSurfaceSecondary}, Dark={StaticResource DarkSurfaceSecondary}}"
                FeatureIsActive="{Binding IsAdvertising}"
                Command="{Binding ToggleAdvertisingCommand}"/>

            <CollectionView
                Grid.Row="1"
                ItemsSource="{Binding AdvertisedEndpoints}"
                VerticalScrollBarVisibility="Never"
                Margin="{StaticResource SpacingLG}">
                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="AdvertisedEndpointViewModel">

                    </DataTemplate>
                </CollectionView.ItemTemplate>
                <CollectionView.EmptyView>
                    <VerticalStackLayout Spacing="{StaticResource SpacingLG}">
                        <Image
                            x:Name="AntennaIcon"
                            WidthRequest="56"
                            HeightRequest="56">
                            <Image.Source>
                                <FontImageSource x:Name="AntennaIconSource"
                                                 FontFamily="NearbyChatIcons"
                                                 Glyph="{StaticResource icon-antenna}"
                                                 Color="{AppThemeBinding Light={StaticResource LightTextQuaternary}, Dark={StaticResource DarkTextQuaternary}}"/>
                            </Image.Source>
                        </Image>
                        <Label
                            TextColor="{AppThemeBinding Light={StaticResource LightTextQuaternary}, Dark={StaticResource DarkTextQuaternary}}"
                            HorizontalTextAlignment="Center">
                            <Label.Triggers>
                                <DataTrigger TargetType="Label"
                                             Binding="{Binding IsAdvertising}"
                                             Value="False">
                                    <Setter Property="Text"
                                            Value="Start advertising to be discoverable"/>
                                </DataTrigger>
                                <DataTrigger TargetType="Label"
                                             Binding="{Binding IsAdvertising}"
                                             Value="True">
                                    <Setter Property="Text"
                                            Value="Waiting for connection requests..."/>
                                </DataTrigger>
                            </Label.Triggers>
                        </Label>
                    </VerticalStackLayout>
                </CollectionView.EmptyView>
            </CollectionView>
        </Grid>
    </BasePage.Content>
</BasePage>